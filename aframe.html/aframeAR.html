<!DOCTYPE html>
<html>
<head>
  <title>Aframe</title>
  <script src="../aframe/aframe.min.js"></script>
  <script src='../three/js/libs/inflate.min.js'></script>
  <script src="../three/build/three.js"></script>
  <script src="../three/js/controls/TrackballControls.js"></script>
  <script src="../three/js/loaders/VTKLoader.js"></script>
  <script src="../three/js/Detector.js"></script>
  <script src="../three/js/libs/stats.min.js"></script>  <meta charset="utf-8">
  <script src="../aframe/aframe-ar.js"></script>
  <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
</head>
<body>
  <a-scene embedded arjs="trackingMethod: best;">
      <a-anchor hit-testing-enabled='true'>
          <a-entity></a-entity>
      </a-anchor>
    <a-camera-static/>
  </a-scene>

<!--   <a-scene>
      <a-entity></a-entity>
  </a-scene> -->

  <script>

      var container, stats;

      var camera, controls, scene, renderer;

      var cross;

      init();
      // animate();

      function init() {
<<<<<<< HEAD
        scene = document.querySelector('a-scene').object3D;
        // console.log(scene);
=======

        scene = document.querySelector('a-entity').object3D;

>>>>>>> afe718a316082eb0be32e60e6db5e51e19a5a0c0
        // light

        var beeybeey;

        var material = new THREE.MeshLambertMaterial( { color: 0xffffff, side: THREE.DoubleSide } );

        var loader1 = new THREE.VTKLoader();
        loader1.load( '../vtkaas/pierre_t_s_d.vtk', function ( geometry ) {

          geometry.computeVertexNormals();
          geometry.center();
          beeybeey = geometry.boundingBox.min

          var material = new THREE.MeshLambertMaterial( { color: 0x00ff00, side: THREE.DoubleSide } );
          var mesh = new THREE.Mesh( geometry, material );

          mesh.position.set( 0, 0, 0 );
          mesh.scale.multiplyScalar( 0.002 );
          rotateObject( mesh, 90, 0 ,0);

          scene.add( mesh );

        var loader3 = new THREE.VTKLoader();
        loader3.load( '../vtkaas/pierre_t_s_d_stomach.vtk', function ( geometry ) {

          geometry.computeVertexNormals();
          geometry.translate(beeybeey.x, beeybeey.y, beeybeey.z)
          // geometry.center();
          // console.log(geometry.boundingBox.max)

          var material = new THREE.MeshLambertMaterial( { color: 0xff0000, side: THREE.DoubleSide } );
          var mesh = new THREE.Mesh( geometry, material );

          mesh.position.set( 0, 0, 0 );
          mesh.scale.multiplyScalar( 0.002 );
          rotateObject( mesh, 90, 0 ,0);

          scene.add( mesh );

        } );

        } );



      }

      function onWindowResize() {

        camera.aspect = window.innerWidth / window.innerHeight;
        camera.updateProjectionMatrix();

        renderer.setSize( window.innerWidth, window.innerHeight );

        controls.handleResize();

      }

      function animate() {

        requestAnimationFrame( animate );

        controls.update();
        renderer.render( scene, camera );

        stats.update();

      }

      function rotateObject(object,degreeX=0, degreeY=0, degreeZ=0){

         degreeX = (degreeX * Math.PI)/180;
         degreeY = (degreeY * Math.PI)/180;
         degreeZ = (degreeZ * Math.PI)/180;

         object.rotateX(degreeX);
         object.rotateY(degreeY);
         object.rotateZ(degreeZ);

      }


    </script>
</body>
</html>
